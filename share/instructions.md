# Note

The radii of the fitted ellipsoid surface are arranged based on the smallest rotation angle of the ellipsoid axes, deviated from the defined reference frame, along its axis of rotation containing its approximate center. 

This arrangement also applies to the sequence of the eigenvalues and their corresponding eigenvectors. Consequently, the transpose of the eigenvectors' matrix from `*evec_column_p`, generated by the function
```cpp
Parameters ellipsoid::fit(..., Eigen::Vector3d* eval_p, Eigen::Matrix3d* evec_column_p, ...);
```
can be used as a rotation matrix to rotate the fitted ellipsoid to the nearest non-rotated ellipsoid, in term of rotation angle.

<details>
  <summary>Mathematical Details</summary>

From the C++ function above, suppose `*eval_p` contains $[e_0\ e_1\ e_2]^T$, and let its diagonal matrix `eval_p->asDiagonal()` denoted as $E$. Meanwhile, let `evec_column_p->transpose()` be denoted as $R$. 

Consider the inputs be $d_{in}=[x_{in}\ y_{in}\ z_{in}]^T$, while the rotated outputs be $d_{out}=[x_{out}\ y_{out}\ z_{out}]^T$. The relationship between these vectors is given by:
$$
e_0\ x_{out}^2+e_1\ y_{out}^2+e_2\ z_{out}^2 = d_{in}^T R^T E\ R\ d_{in}
$$
The rotation from $d_{in}$ to $d_{out}$ is performed as follows:
$$
d_{out} = R\ d_{in}
$$
</details>

## Warning
If any of the radii results in a 'NaN' value, it indicates that the fitted surface is not an ellipsoid but a hyperboloid.